<div class="container">
  <div class="jumbotron">
    <div class="title">JUST. PICK. SOMEWHERE.</div>
    <br>

    <!--Avatar icon-->
    <div class="avatar"[style.background-color]="colour">
      <span class="name">{{api.name.substring(0,1)}}</span>
    </div>

    <!--Lobby code-->
    <p>Your Lobby code is: <strong>{{api.lobbyID}}</strong></p>

    <!--<p *ngIf="places.length>0">Your places</p>-->
    <!--<p *ngIf="places.length==0">No one's added any places yet... be the first!</p>-->

    <div *ngIf="!addingPlace">
      <!--Adding-->
      <button (click)="addingPlace=true" type="button" class="btn btn-primary"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span>New place</button>
      <!--Refreshing-->
      <!--<button *ngIf="!addingPlace" (click)="refresh()" type="button" class="btn btn-warning"><span class="glyphicon glyphicon-refresh" aria-hidden="true"></span>Refresh Now</button>
      <p id="refresh">Automatically refreshing in {{time}}...</p>-->
      <p></p>
    </div>

    <!--Place adding form-->
    <div *ngIf="addingPlace" class="form-inline">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">New Place</h3>
        </div>
        
        <div class="panel-body">

          <div *ngIf="error.length!=0">
            <alert type="danger">
              <strong>Error:</strong> {{error}}
            </alert>
          </div>

          <div class="form-group">
            <label>Link</label>
            <input #link type="text" class="form-control" placeholder="airbnb.com/place/123456">
          </div>

          <div class="form-group">
            <label>Price (per person)</label>
            <input #price (keyup.enter)="addPlace(link.value, price.value)" type="text" class="form-control" placeholder="Â£64.00">
          </div>
          
          <!--Submit/cancel-->
          <button (click)="addPlace(link.value, price.value)" type="button" class="btn btn-primary btn"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span>Done</button>
          <button (click)="addingPlace=false" type="button" class="btn btn-warning btn"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span>Cancel</button>
        </div>
      </div>
    </div>

    <!--Places-->
    <div *ngFor="let a of places; let i = index" class="panel panel-default" [ngClass]="{'new' : newPlace(i)}">
      <div class="panel-body">
        <!--If it's new-->
        <span *ngIf="showNewLabel(a)" class="label label-success">NEW</span>
        <!--Title-->
        <a href="{{a.link}}">{{a.link}}</a> for {{a.price}} per person
        
        <!--Amount of votes-->
        <span class="votes btn btn-xs pull-right" [ngClass]="getVoteClass(a)" [tooltip]="getVoteString(a)">{{a.votes}}</span>

        <!--Voting buttons-->
        <button [disabled]="!a.downvoters.includes(api.name) && a.upvoters.includes(api.name)" (click)="vote(i, 0)" class="btn btn-success btn-xs glyphicon glyphicon-thumbs-up pull-right" aria-hidden="true"></button>
        <button [disabled]="!a.upvoters.includes(api.name) && a.downvoters.includes(api.name)" (click)="vote(i, 1)" class="btn btn-danger btn-xs glyphicon glyphicon-thumbs-down pull-right" aria-hidden="true"></button>
      </div>

      <!--Author-->
      <div class="panel-footer">
        <span *ngIf="a.author==api.name">Submitted by you</span>
        <span *ngIf="a.author!=api.name">Submitted by {{a.author}}</span>
      </div>
    </div>

    <!--Logout button-->
    <button (click)="logout()" type="button" class="btn btn-danger btn-lg full-btn"><span class="glyphicon glyphicon-log-out" aria-hidden="true"></span>Logout</button>
  </div>
</div>